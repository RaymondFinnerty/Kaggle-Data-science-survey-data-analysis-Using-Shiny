---
title: "Analyzing Kaggle Data Science Survey Data-2017:PART-2"
author: "Anish Singh Walia"
output:
  html_document:
    df_print: paged
---




## AIM 

This is the part 2 of this project.This is a data analytics project for mining analyzing, visualizing the data collected by the Kaggle Data science survey conducted in 2017.



#### 1) Part 2- Will mostly aim at analyzing things such as what is the most preferred tool for implementing Datascience, Most used ML method, learning platform,What language they recommend etc and other more specific answers related to datascience and machine learning given by the survey participants.



###Let's get started


Let's start with the most preferred tool for implementing DS and ML.

```{r,message=FALSE, warning=FALSE}

require(data.table)
require(highcharter)
require(ggplot2)
require(tidyverse)

SurveyDf<-fread("../Datasets/kagglesurvey2017/multipleChoiceResponses.csv") #for faster data reading

attach(SurveyDf)

table(MLToolNextYearSelect)
tooldf<-as.data.frame(table(MLToolNextYearSelect)) %>% arrange(desc(Freq))
#let's remove missing value
tooldf[1,]<-NA
tooldf<-na.omit(tooldf)
names(tooldf)<-c("Tool","Count")
#now let's plot the data
hchart(tooldf,hcaes(x=Tool,y=Count),type="column",name="Count",color="#9B6ED8") %>%  
  hc_exporting(enabled = TRUE) %>%
  hc_title(text="Barplot of tools used by participants",align="center") %>%
  hc_add_theme(hc_theme_elementary()) 



toptooldf<-na.omit(tooldf) %>% arrange(desc(Count)) %>% top_n(10)
#plotting a funnel chart of top 10 most used tools entered by the users
col <- c("#d35400", "#2980b9", "#2ecc71", "#f1c40f", "#2c3e50", "#7f8c8d","#000004", "#3B0F70", "#8C2981", "#DE4968")

hchart(toptooldf,hcaes(x=Tool,y=Count),type="funnel",name="Count",color=col) %>% 
  hc_exporting(enabled = TRUE) %>%
  hc_title(text="Funnel chart of top 10 most used tools used by survey participants",align="center")






```

-----------------------


###Let's check Top countries uses which tools ?

Let's first make a dataframe which consists of Top 10 particapnt's countries and grouped by the preferred tool entered by them which is then summarized by the total count.

```{r message=FALSE, warning=FALSE}
#dataframe of top 10 countries 
countryCount<-as.data.frame(table(SurveyDf$Country)) %>%  top_n(10)


countryTool<-SurveyDf %>% group_by(MLToolNextYearSelect,Country) %>%
  select(Country,MLToolNextYearSelect) %>% 
  filter(Country %in% countryCount$Var1, MLToolNextYearSelect %in% toptooldf$Tool) %>%
  summarise(total_count=n()) %>%
  arrange(desc(total_count))


hchart(countryTool,hcaes(x=Country,y=total_count,group=MLToolNextYearSelect),type="column") %>% 
  hc_title(text="Barplot of Top 10 Country grouped by Tool",align="center") %>%
  hc_exporting(enabled=TRUE) 
  

ggplot(aes(x=Country,y=total_count),data=countryTool) +
  geom_col(fill="purple") +
  coord_flip() +
  facet_wrap(~MLToolNextYearSelect)




```

We can notice that Every top 10 country uses *__Tensorflow__, followed by __python__ , then __R__* as their preferred tools for implementing machine learning and data science.


Let's see which gender prefers which tool amongst the top 10 most used tools?


```{r, message=FALSE, warning=FALSE}
genderTool<-SurveyDf %>% group_by(MLToolNextYearSelect,GenderSelect) %>%
  select(GenderSelect,MLToolNextYearSelect) %>% 
  filter(MLToolNextYearSelect %in% toptooldf$Tool,GenderSelect %in% c("Male","Female")) %>%
  summarise(total_count=n()) %>%
  arrange(desc(total_count))


hchart(genderTool,hcaes(x=MLToolNextYearSelect,y=total_count,group=GenderSelect),type="column") %>%   hc_title(text="Gender vs Most preferred tool",align="center") %>%
  hc_exporting(enabled=TRUE) 

#checking the ratio of male to female users for tools-
genderTooldf<-genderTool %>% spread(key = GenderSelect,value=total_count) %>%
  mutate(Percent_male=round((Male/(Male+Female))*100,2),Percent_female=round((Female/(Male+Female))*100,2)) %>%
  arrange()

hchart(genderTooldf,hcaes(x=MLToolNextYearSelect,y=Percent_female),name="Percent",type="column",color="#ED2FAE") %>%   hc_title(text="Percent of female using tools out of 100",align="center") %>%
  hc_exporting(enabled=TRUE) 


hchart(genderTooldf,hcaes(x=MLToolNextYearSelect,y=Percent_male),name="Percent",type="column",color="#F36A20") %>%   hc_title(text="Percent of Male using tools out of 100",align="center") %>%
  hc_exporting(enabled=TRUE) 



```



-----------------------------------------


###Let's analyze the most used ML method?



```{r message=FALSE, warning=FALSE}

table(MLMethodNextYearSelect)

Mlmethod<-as.data.frame(table(MLMethodNextYearSelect)) %>% arrange(desc(Freq))

Mlmethod[1,]<-NA
names(Mlmethod)<-c("Method","Count")

hchart(na.omit(Mlmethod),hcaes(x=Method,y=Count),type="column",name="Count",color="#FF5733") %>% 
  hc_exporting(enabled = TRUE) %>%
  hc_title(text="Barplot of ML Method used by participants",align="center") %>%
  hc_add_theme(hc_theme_elementary()) 
  

#treemap of most preferred methods of ML
hchart(Mlmethod, "treemap", hcaes(x = Method, value = Count,color=Count)) %>%
  hc_exporting(enabled = TRUE) %>%
  hc_title(text="Treemap of ML Method used by participants",align="center") 
  



```

    

As we can notice the most used ML technique is *Deep learning and neural networks followed by time series analysis*.




Let's check the countrywise usage of ML methods.Again I am going to do it for top 10 countries.


```{r message=FALSE, warning=FALSE}


countryMethod<-SurveyDf %>% select(Country,MLMethodNextYearSelect) %>%
  group_by(Country,MLMethodNextYearSelect) %>%
  filter(Country %in% countryCount$Var1) %>%
  summarize(total_count=n())%>%
  arrange(desc(total_count))




```


Let's first filter for United States and check the most used tools.


```{r message=FALSE, warning=FALSE}

#First for United states
USmethoddf<-countryMethod %>% filter(Country=="United States") %>% arrange(desc(total_count))

USmethoddf[1,]<-NA

hchart(na.omit(USmethoddf),hcaes(x=MLMethodNextYearSelect,y=total_count),type="column",color="#BFD13D") %>%
  hc_exporting(enabled = TRUE) %>%
  hc_title(text="Barplot of ML Method used by participants in United States",align="center") %>%
  hc_add_theme(hc_theme_elementary()) 
  



```


For India.
```{r message=FALSE, warning=FALSE}

Indiamethoddf<-countryMethod %>% filter(Country=="India") %>% arrange(desc(total_count))

Indiamethoddf[1,]<-NA

hchart(na.omit(Indiamethoddf),hcaes(x=MLMethodNextYearSelect,y=total_count),type="column",color="red") %>%
  hc_exporting(enabled = TRUE) %>%
  hc_title(text="Barplot of ML Method used by participants in India",align="center") %>%
  hc_add_theme(hc_theme_elementary()) 
  

```



For China.

```{r}
ChinaMethoddf<-countryMethod %>% filter(Country=="People 's Republic of China") %>% arrange(desc(total_count))

ChinaMethoddf[2,]<-NA

hchart(na.omit(ChinaMethoddf),hcaes(x=MLMethodNextYearSelect,y=total_count,color=MLMethodNextYearSelect),type="column") %>%
  hc_exporting(enabled = TRUE) %>%
  hc_title(text="Barplot of ML Method used by participants in China",align="center") %>%
  hc_add_theme(hc_theme_elementary()) 
  
```


For Russia.


```{r}
RussiaMethoddf<-countryMethod %>% filter(Country=="Russia") %>% arrange(desc(total_count))

RussiaMethoddf[1,]<-NA

hchart(na.omit(RussiaMethoddf),hcaes(x=MLMethodNextYearSelect,y=total_count,color=MLMethodNextYearSelect),type="column") %>%
  hc_exporting(enabled = TRUE) %>%
  hc_title(text="Barplot of ML Method used by participants in Russia",align="center") %>%
  hc_add_theme(hc_theme_elementary()) 

```




-----------------

USA,India and China combined


```{r}

MethodTopCountry<-countryMethod %>% filter(Country %in% c("United States","India","United Kingdom"))

MethodTopCountry[c(1,2,7),]<-NA


hchart(na.omit(MethodTopCountry),hcaes(x=MLMethodNextYearSelect,y=total_count,group=Country),type="column",color=c("#FFA500","#C71585","#00FF00")) %>%
  hc_exporting(enabled = TRUE) %>%
  hc_title(text="Barplot of ML Method used by top 3 participants Countries",align="center") %>%
  hc_add_theme(hc_theme_elementary()) 



```





